<div class="invoice-detail-container">
  <div class="page-header">
    <div class="header-left">
      <button class="btn btn-secondary btn-back" (click)="goBack()" title="Go back to invoices">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5"></path>
          <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back
      </button>
      <div>
        <h1>Invoice Details</h1>
        <p class="subtitle">View invoice information and manage payment</p>
      </div>
    </div>
    <div class="header-actions" *ngIf="invoice">
      <button
        *ngIf="canMarkAsPaid()"
        class="btn btn-success"
        (click)="markAsPaid()"
        title="Mark as Paid"
      >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        Mark as Paid
      </button>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-error">
    {{ errorMessage }}
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Loading invoice details...</p>
  </div>

  <!-- Invoice Details -->
  <div *ngIf="invoice && !isLoading" class="invoice-details">
    <div class="detail-card">
      <div class="card-header">
        <h3>Invoice Information</h3>
        <span class="status-badge" [ngClass]="getStatusClass(invoice.status)">
          {{ getStatusLabel(invoice.status) }}
        </span>
      </div>
      <div class="card-body">
        <div class="detail-grid">
          <div class="detail-item">
            <label>Invoice Number</label>
            <p>{{ invoice.invoiceNumber || 'N/A' }}</p>
          </div>
          <div class="detail-item">
            <label>Invoice Date</label>
            <p>{{ formatDate(invoice.invoiceDate) }}</p>
          </div>
          <div class="detail-item">
            <label>Due Date</label>
            <p>{{ formatDate(invoice.dueDate) }}</p>
          </div>
          <div class="detail-item">
            <label>Amount</label>
            <p class="amount">{{ formatCurrency(invoice.amount) }}</p>
          </div>
          <div class="detail-item">
            <label>Customer</label>
            <p>{{ invoice.customerName || invoice.customer?.customerName || 'N/A' }}</p>
          </div>
          <div class="detail-item">
            <label>Status</label>
            <p>
              <span class="status-badge" [ngClass]="getStatusClass(invoice.status)">
                {{ getStatusLabel(invoice.status) }}
              </span>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

